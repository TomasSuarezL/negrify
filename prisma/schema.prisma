datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id    String @id @default(cuid())
  email String @unique

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  password Password?
  dj       DJ?
  Cliente  Cliente?
}

model Password {
  hash String

  user   User   @relation(fields: [userId], references: [id], onDelete: Cascade, onUpdate: Cascade)
  userId String @unique
}

model DJ {
  id     String @id @default(cuid())
  user   User   @relation(fields: [userId], references: [id], onDelete: Cascade, onUpdate: Cascade)
  userId String @unique

  nombre              String
  genero              Genero[]
  ubicacion           Ubicacion   @relation(fields: [ubicacionId], references: [id])
  ubicacionId         String
  reviews             Review[]
  avatar              String
  background          String
  descripcion         String
  artistasReferencias Artista[]
  redes               RedSocial[]
  clientesFaveados    Cliente[]
}

model Cliente {
  id     String @id @default(cuid())
  user   User   @relation(fields: [userId], references: [id], onDelete: Cascade, onUpdate: Cascade)
  userId String @unique

  nombre      String
  apellido    String
  ubicacion   Ubicacion @relation(fields: [ubicacionId], references: [id])
  ubicacionId String
  avatar      String
  favoritos   DJ[]
  Review      Review[]
}

model Genero {
  id          Int    @id @default(autoincrement())
  descripcion String
  djs         DJ[]
}

model Ubicacion {
  id        String    @id @default(cuid())
  pais      String
  ciudad    String
  direccion String
  latitud   String?
  longitud  String?
  djs       DJ[]
  Cliente   Cliente[]
}

model Review {
  id        Int     @id @default(autoincrement())
  rate      Int
  contenido String
  dj        DJ      @relation(fields: [dJId], references: [id])
  dJId      String
  cliente   Cliente @relation(fields: [clienteId], references: [id])
  clienteId String
}

model Artista {
  id     Int     @id @default(autoincrement())
  nombre String
  DJ     DJ?     @relation(fields: [dJId], references: [id])
  dJId   String?
}

model RedSocial {
  id     Int     @id @default(autoincrement())
  nombre String
  DJ     DJ?     @relation(fields: [dJId], references: [id])
  dJId   String?
}
